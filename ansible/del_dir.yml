---
- name: Create Directory
  hosts: '{{host_name}}'
  become: true
  gather_facts: false

  tasks:

  - name: Read CSV
    set_fact:
        dir_list: "{{lookup('file',vars['csv_file_path']).split('\n')}}"

  - name: Delete Directory/file
    file:
        path: "{{item.split(',')[1]}}"
        state: absent
    delegate_to: "{{hostname}}"
    when: inventory_hostname == hostname
    vars:
        hostname: "{{item.split(',')[0]}}"
    loop: "{{dir_list}}"
    loop_control:
        loop_var: item
